(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,t,a){e.exports=a(38)},20:function(e,t,a){},22:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),o=a(14),i=a.n(o),r=(a(20),a(3)),c=a(4),u=a(7),l=a(5),m=a(6),h=a(2),d=(a(22),a(10)),p=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={rooms:[],newRoomName:""},a.handleChange=a.handleChange.bind(Object(h.a)(Object(h.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(h.a)(Object(h.a)(a))),a.roomsRef=a.props.firebase.database().ref("rooms"),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.roomsRef.on("child_added",function(t){var a=t.val();a.key=t.key,e.setState({rooms:e.state.rooms.concat(a)})})}},{key:"handleChange",value:function(e){this.setState({newRoomName:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.state.newRoomName&&(this.roomsRef.push({name:this.state.newRoomName}),this.setState({newRoomName:""}))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"column-1"},s.a.createElement("div",{className:"room-list"},s.a.createElement("section",null,s.a.createElement("p",{className:"room-name"}," ",this.props.activeRoom?this.props.activeRoom.name:"Join Chat Room"," "),this.state.rooms.map(function(t,a){return s.a.createElement("li",{className:"room-list-item",key:a,onClick:function(){return e.props.changeActiveRoom(t)}},t.name)})),s.a.createElement("div",{id:"new-room"},s.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},s.a.createElement("label",null,s.a.createElement("div",{id:"create-room"}," Create Chat Room "),s.a.createElement("input",{type:"text",placeholder:"Enter room name...",value:this.state.newRoomName,onChange:function(t){return e.handleChange(t)}})),s.a.createElement("div",null,s.a.createElement("input",{id:"room-button",type:"submit",value:"Create"}))))))}}]),t}(n.Component),v=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={username:"",content:"",sentAt:"",roomId:"",messages:[]},a.messagesRef=a.props.firebase.database().ref("messages"),a.createMessage=a.createMessage.bind(Object(h.a)(Object(h.a)(a))),a.handleMessageSubmit=a.handleMessageSubmit.bind(Object(h.a)(Object(h.a)(a))),a.handleChange=a.handleChange.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.messagesRef.on("child_added",function(t){var a=t.val();e.setState({messages:e.state.messages.concat(a)})})}},{key:"handleChange",value:function(e){e.preventDefault();var t=null===this.props.user?"Guest":this.props.user.displayName;this.setState({username:t,content:e.target.value,sentAt:this.props.firebase.database.ServerValue.TIMESTAMP,roomId:this.props.activeRoom})}},{key:"createMessage",value:function(e){this.messagesRef.push({username:this.state.username,content:this.state.content,sentAt:this.state.sentAt,roomId:this.props.activeRoom.roomId}),this.setState({username:"",content:"",sentAt:"",roomId:""})}},{key:"handleMessageSubmit",value:function(e){e.preventDefault(),this.createMessage(),this.setState({content:""})}},{key:"formatTime",value:function(e){var t=new Date(e),a=t.getFullYear();return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()]+" "+t.getDate()+" "+a+" "+t.getHours()+":"+this.addZero(t.getMinutes())+":"+this.addZero(t.getSeconds())}},{key:"addZero",value:function(e){return e<10&&(e="0"+e),e}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"column-2"},s.a.createElement("div",{className:"message-list"},s.a.createElement("section",{className:"message-group"},s.a.createElement("div",null,s.a.createElement("h3",null,"Current Messages"),this.state.messages.filter(function(t){return t.roomId===e.props.activeRoom.roomId}).sort(function(e,t){return e.sentAt-t.sentAt}).map(function(t,a){return s.a.createElement("div",{key:a},s.a.createElement("p",{className:"message-align"},t.username,":"),s.a.createElement("p",{className:"message-content-align"},t.content),s.a.createElement("p",{className:"message-date-align"}," sent: ",e.formatTime(t.sentAt)))}))),s.a.createElement("div",{className:"new-message"},s.a.createElement("form",{onSubmit:this.handleMessageSubmit},s.a.createElement("input",{id:"message-bar",type:"text",value:this.state.content,onChange:this.handleChange,placeholder:"Write your message here..."}),s.a.createElement("input",{id:"message-button",type:"submit",value:"Send"})))))}}]),t}(n.Component),b=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={user:""},a.signIn=a.signIn.bind(Object(h.a)(Object(h.a)(a))),a.signOut=a.signOut.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"signIn",value:function(){var e=new this.props.firebase.auth.GoogleAuthProvider;this.props.firebase.auth().signInWithPopup(e)}},{key:"signOut",value:function(){this.props.firebase.auth().signOut()}},{key:"componentDidMount",value:function(){var e=this;this.props.firebase.auth().onAuthStateChanged(function(t){e.props.setUser(t)})}},{key:"toggleButton",value:function(){return null===this.props.user?s.a.createElement("button",{type:"button",className:"sign-in",onClick:this.signIn}," Sign-in with Gmail"):s.a.createElement("button",{type:"button",className:"sign-off",onClick:this.signOut}," Logout ")}},{key:"render",value:function(){var e=null===this.props.user?"Guest":this.props.user.displayName;return s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("span",{id:"username"}," Signed-in as: ",e)),s.a.createElement("div",null,this.toggleButton()))}}]),t}(n.Component);d.initializeApp({apiKey:"AIzaSyDCDtnIu7Kq0xrX5PywOuzw9ndI7qECn9U",authDomain:"bloc-chat-react-6af02.firebaseapp.com",databaseURL:"https://bloc-chat-react-6af02.firebaseio.com",projectId:"bloc-chat-react-6af02",storageBucket:"bloc-chat-react-6af02.appspot.com",messagingSenderId:"437627547858"});var g=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={activeRoom:"",activeUser:""},a.changeActiveRoom=a.changeActiveRoom.bind(Object(h.a)(Object(h.a)(a))),a.setUser=a.setUser.bind(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"changeActiveRoom",value:function(e){this.setState({activeRoom:e}),console.log(this.state.activeRoom)}},{key:"setUser",value:function(e){this.setState({activeUser:e})}},{key:"passRoomId",value:function(e){this.setState({activeRoom:e})}},{key:"passUser",value:function(e){this.setState({activeUser:e})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"title"},s.a.createElement("header",null,s.a.createElement("h1",null," Chat Fiction "))),s.a.createElement("main",null,s.a.createElement("section",{id:"sidebar"},s.a.createElement(p,{firebase:d,activeRoom:this.state.activeRoom,changeActiveRoom:this.changeActiveRoom,passRoomId:function(t){return e.passRoomId(t)}})),s.a.createElement("section",{id:"message room"},s.a.createElement(v,{firebase:d,activeRoom:this.state.activeRoom,user:this.state.activeUser,setUser:this.setUser})),s.a.createElement("section",null,s.a.createElement(b,{firebase:d,setUser:this.setUser,user:this.state.activeUser,passUser:function(t){return e.passUser(t)}}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[15,2,1]]]);
//# sourceMappingURL=main.2f2d0924.chunk.js.map